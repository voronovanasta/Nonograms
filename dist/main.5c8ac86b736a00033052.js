(()=>{"use strict";var e,t={856:(e,t,i)=>{var n=function(){console.log("page");return{login:'\n  <div id="login" class="start-section">\n  <input id="logMail" type="email" placeholder="Email">\n  <input id="logPassword" type="password" placeholder="Password">\n  <button id="loginBtn" class="button">Login\n        </button>\n  <div id="error"></div>\n</div>',register:'\n <div id="register" class="start-section">\n <h1>Nonograms</h1><h3>Registration</h3>\n <input id="regMail" class="input is-medium" type="email" placeholder="Email">\n       <input id="regPassword"  type="password" placeholder="Password">\n       <button id="regBtn" class="button">\n         Register\n       </button>\n</div>'}}(),s=[{name:"coffee",matrix:[[1,1,0,0,0,0,0,0,0,1,0,0,1,1,1],[1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,1,0,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,0,0,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,0,0,0,1],[1,1,0,1,1,1,1,1,1,1,1,0,1,1,0],[1,1,0,0,1,1,1,1,1,1,0,0,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,1,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,1,1],[1,0,1,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,1,1,0,0,0,0,0,0,1,1,0,0,1],[0,0,0,1,1,1,1,1,1,1,1,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,0,0,0,1,1,1,1]]},{name:"elephant",matrix:[[0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,0],[1,1,0,1,0,0,0,0,0,0,1,0,0,1,1],[1,0,0,0,1,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,1,0,0,1],[1,0,0,1,0,1,0,0,0,0,0,1,0,0,1],[1,1,0,1,1,1,0,0,1,0,0,1,0,1,1],[0,1,1,1,1,0,0,0,1,0,1,1,1,1,0],[0,1,0,1,0,0,0,1,1,1,1,0,0,0,0],[0,1,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,0,1,0,0,1,1,1,0],[1,1,1,1,1,1,1,0,1,0,0,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},{name:"lion",matrix:[[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[1,0,0,1,1,1,1,1,1,0,0,1,1,1,0],[1,0,1,1,0,1,0,0,1,1,0,1,1,1,0],[1,1,1,0,0,1,0,0,0,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,0,0,1,0,1,0,0,0,0,0,1,1,1,1],[1,0,0,1,1,1,0,0,0,0,0,1,0,1,1],[1,1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,1,0,0,1,0,0,0,0,0,1,0,1,0,1],[1,1,0,1,1,1,1,0,1,1,1,0,1,1,0],[1,1,1,0,0,0,0,1,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,1,0],[1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0,0]]},{name:"candle",matrix:[[1,1,1,1,0,0,1,1,1,1,1,0,0,1,1],[1,1,0,0,0,1,1,0,0,0,1,1,0,0,1],[1,0,0,0,0,1,0,0,1,0,0,1,0,0,0],[1,0,0,0,0,1,0,1,1,1,0,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,0,0,0,0],[0,1,0,0,1,1,1,0,0,0,1,1,1,0,0],[0,1,0,0,0,1,0,0,0,0,1,1,0,0,0],[1,0,1,0,1,1,0,0,1,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,1,0,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,1,0,0,1,0,0],[1,0,0,0,1,1,0,1,1,1,0,1,1,0,0],[1,0,0,0,0,1,0,0,1,0,0,1,0,0,0],[1,1,0,0,0,0,1,1,1,1,1,0,0,0,1],[1,1,1,1,0,1,1,0,0,0,1,1,0,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,0,1,1]]},{name:"frog",matrix:[[0,0,0,0,1,1,0,0,0,1,1,0,0,1,0],[1,0,0,1,1,1,1,0,1,1,1,1,0,1,0],[1,0,0,1,0,1,1,1,1,0,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,0,1,0,1,1,1,1,1,1,0],[0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],[0,1,1,1,0,0,0,0,0,0,0,1,1,1,0],[0,0,1,1,1,0,0,0,0,1,1,1,1,0,0],[1,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,1,1,1,1,0,0,1,1,1,0,0,0,1],[1,1,1,0,1,0,0,0,0,1,1,1,0,0,0],[0,1,0,0,1,0,0,0,0,1,0,1,1,1,0],[0,0,0,1,1,1,0,0,1,1,1,0,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0,1],[0,1,1,1,1,0,0,0,0,1,1,1,1,0,1]]}],o=[{name:"snowman",matrix:[[1,1,1,0,0,0,0,1,1,1],[0,1,0,0,1,0,1,0,1,1],[1,1,0,0,1,1,1,1,1,1],[0,1,0,0,0,0,0,0,1,0],[1,1,1,0,0,0,0,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,0,0,1,0,0,0,0,0,1],[1,0,0,1,0,1,0,0,0,1],[1,0,0,1,0,0,0,0,0,1],[1,1,0,0,0,1,0,0,1,1]]},{name:"turnip",matrix:[[0,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,0,1,1,1,0],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,0,1,0,0,1,1],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,0,0,0,1,1,0],[0,0,1,0,0,0,0,0,1,0],[1,1,1,0,0,0,0,0,1,1],[1,1,1,1,0,0,0,1,1,1],[1,1,1,1,1,0,1,1,1,1]]},{name:"cat",matrix:[[0,0,0,0,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,1,1],[1,1,0,1,1,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,1],[1,0,1,0,1,0,0,0,0,1],[1,1,1,1,1,0,0,1,1,1],[0,1,1,1,0,0,1,1,1,1],[0,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,0,1,1]]},{name:"kettle",matrix:[[0,0,1,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,0,1],[1,0,1,1,1,1,1,1,1,1],[1,0,0,1,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0]]},{name:"plum",matrix:[[0,0,0,0,0,1,1,1,1,0],[0,1,1,1,1,0,0,1,0,0],[1,1,1,1,1,0,1,1,0,0],[1,1,1,1,0,0,1,0,0,0],[1,1,0,0,1,1,1,1,1,0],[1,0,0,1,1,1,1,0,1,1],[0,0,0,1,1,1,1,1,0,1],[0,0,0,1,1,1,1,1,0,1],[0,0,0,1,1,1,1,1,1,1],[0,0,0,0,1,1,1,1,1,0]]}],a=[{name:"tree",matrix:[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0]]},{name:"rhombus",matrix:[[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]]},{name:"ruLetterD",matrix:[[0,1,1,1,0],[0,1,0,1,0],[0,1,0,1,0],[1,1,1,1,1],[1,0,0,0,1]]},{name:"dinosour",matrix:[[0,0,0,1,1],[0,0,0,1,0],[0,1,1,1,0],[0,1,1,1,0],[1,1,0,1,0]]},{name:"fan",matrix:[[0,1,0,0,0],[0,1,0,1,1],[0,0,1,0,0],[1,1,0,1,0],[0,0,0,1,0]]}];function l(e,t){switch(console.log(e),console.log(t),e){case"light":return a[t].matrix;case"middle":return o[t].matrix;case"hard":return s[t].matrix}}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:String(t)}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=null,this.model=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e,t){this.container=e,this.model=t,this.field=this.container.querySelector("#field"),this.eventHandler(),this.burgerHandler(),this.root=document.querySelector("#root")}},{key:"eventHandler",value:function(){var e=this;this.container.querySelector("#field").addEventListener("contextmenu",(function(e){return e.preventDefault(),e.stopPropagation(),!1})),this.container.querySelector("#field").addEventListener("mouseup",(function(t){e.model.updateClickCount(),e.model.fillCell(t);var i=e.container.querySelector("#levels").options.selectedIndex;e.model.levelNumber=i;var n=e.container.querySelector("#items").options.selectedIndex,s=e.container.querySelector("#items").options[n].text;e.model.patterName=s,e.model.checkWinCondition()})),this.container.addEventListener("click",(function(t){switch(t.target.id){case"solution":e.container.querySelector("#save").setAttribute("disabled","disabled"),e.model.clickCount=0,e.model.drawSolution(),e.model.stopTimer(),e.model.resetTimer(),e.container.querySelector("#field").classList.add("disable-click");break;case"settings":t.preventDefault(),e.model.showSettings();break;case"ok-btn":e.model.hideSettings();break;case"save":e.field.classList.add("disable-click"),e.model.saveGame();break;case"load":e.field.classList.remove("disable-click"),e.model.checkSavedGame(),e.model.downloadSavedGame(),e.model.updateClickCount();break;case"reset":e.container.querySelector("#save").removeAttribute("disabled"),e.field.classList.remove("disable-click"),e.model.resetGame(),e.model.clickCount=0,e.model.patternCellsCount=0;break;case"result-btn":t.preventDefault(),e.model.hideResultMessage(),e.model.resetTimer();break;case"random":e.model.clickCount=0,e.field.classList.remove("disable-click"),e.model.randomGame();break;case"table":t.preventDefault(),e.model.loadScoreTable(),e.model.showScoreTable();break;case"table-btn":e.model.hideScoreTable(),e.model.resetTimer();break;case"theme-mode":console.log("click"),t.preventDefault(),e.model.darkThemeOn();case"mute":document.querySelectorAll("audio").forEach((function(e){e.muted=!e.muted})),t.preventDefault(),e.model.updateMute()}})),this.container.addEventListener("change",(function(t){switch(t.target.id){case"levels":var i=t.target.options.selectedIndex,n=t.target.options[i].text;e.model.updateItemsSelect(i);var s=e.container.querySelector("#items").options.selectedIndex,o=e.container.querySelector("#items").options[s].text,a=l(n,s);e.model.updateModel(a,i,o),e.model.resetTimer();break;case"items":var r=e.container.querySelector("#levels").options.selectedIndex,c=e.container.querySelector("#levels").options[r].text,h=t.target.options.selectedIndex,u=t.target.options[h].text,d=l(c,h);e.model.updateModel(d,r,u),e.model.resetTimer()}}))}},{key:"burgerHandler",value:function(){var e=this.container.querySelector(".menu");document.querySelector("#root").addEventListener("click",(function(t){switch(console.log(t.target),t.preventDefault(),t.target.id){case"burger":e.classList.add("menu_active"),document.querySelector(".close_nav").classList.add("nav_close-open"),document.querySelector("#popup").classList.add("popup-transparent");break;case"close":e.classList.remove("menu_active"),document.querySelector("#burger").classList.remove("header_burger-hide"),document.querySelector(".close_nav").classList.remove("nav_close-open");break;case"popup":e.classList.remove("nav_active"),document.querySelector("#popup").classList.remove("popup-transparent")}}))}}])&&c(t.prototype,i),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d={level:null,pattern:null,fieldRowCount:0,fieldColumnCount:0,cellWidth:0,cellHeight:0,width:null,height:null,primeColor:null,fillColor:null,cells:[],mute:null,userId:null,canvas:null},m=i(720),v=i(824),p=i(192),f=(0,v.mg)({apiKey:"AIzaSyAIRwHza6hnMcSywJZUkyGQ0ZoKCVWuhIA",authDomain:"nonogram-faadb.firebaseapp.com",databaseURL:"https://nonogram-faadb-default-rtdb.firebaseio.com",projectId:"nonogram-faadb",storageBucket:"nonogram-faadb.appspot.com",messagingSenderId:"449915105132",appId:"1:449915105132:web:c966a52ea91ba5a7b24d49",measurementId:"G-3RGYDH4EHV"}),g=(0,m.YB)(f),y=(0,p.Iv)(f);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:String(t)}var C=["light","middle","hard"],k=[["tree","rhombus","ruLetterD","dinosour","fan"],["snowman","turnip","cat","kettle","plum"],["coffee","elephant","lion","candle","frog"]],S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=null,this.patternCellsCount=0,this.idTimer=null,this.sec=0,this.minutes=0,this.clickCount=0,this.highScoreTable=[],this.cells=[],this.levelNumber=0,this.pattern=null,this.patternNumber=0,this.patterName="tree",this.isMute=!1}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.view=e,this.updatePattern(),this.view.checkMute(),this.view.createFieldCanvas(),this.view.updateCanvasSettings(this.levelNumber),this.defineCells(),this.darkThemeOn(),this.drawField(),this.view.drawLeftClues(this.calculateClues().leftClues,C[this.levelNumber]),this.view.drawTopClues(this.calculateClues().topClues,C[this.levelNumber]),this.view.createTimer(this.minutes,this.sec),this.updateConfig(),this.createSettings(),this.calculateWinCondition(),this.view.createResultMessage(),this.view.createScoreTable()}},{key:"defineCells",value:function(){this.cells=[],console.log(this.pattern),console.log(d.fieldRowCount);for(var e=0;e<this.pattern.length;e++){this.cells[e]=[];for(var t=0;t<this.pattern.length;t++)this.cells[e][t]={x:0,y:0,value:this.pattern[e][t],isPainted:!1,isCrossed:!1}}console.log(this.cells)}},{key:"drawField",value:function(){for(var e=0;e<this.pattern.length;e++)for(var t=0;t<this.pattern.length;t++){var i=t*d.cellWidth+.5,n=e*d.cellHeight+.5;this.cells[e][t].x=i,this.cells[e][t].y=n}this.view.drawField()}},{key:"calculateClues",value:function(){for(var e=[],t=[],i=0;i<this.pattern.length;i++){for(var n=0,s=[],o=0;o<this.pattern[i].length;o++)n+=this.pattern[i][o],0===this.pattern[i][o]&&n>0&&(s.push(n),n=0),this.pattern[i].length-1===o&&n>0&&s.push(n);e.push(s)}for(var a=0;a<d.fieldColumnCount;a++){for(var l=0,r=[],c=0;c<this.pattern.length;c++)l+=this.pattern[c][a],0===this.pattern[c][a]&&l>0&&(r.push(l),l=0),this.pattern.length-1===c&&l>0&&r.push(l);t.push(r)}return{leftClues:e,topClues:t}}},{key:"calculateWinCondition",value:function(){for(var e=0,t=0;t<this.cells.length;t++)for(var i=0;i<this.cells[t].length;i++)1==this.cells[t][i].value&&e++;return e}},{key:"resetGame",value:function(){this.view.resetGame(this.cells),this.stopTimer(),this.resetTimer()}},{key:"updateMute",value:function(){this.isMute?this.isMute=!1:this.isMute=!0,this.view.updateConfig(),this.view.checkMute(this.isMute)}},{key:"updateConfig",value:function(){d.level=this.levelNumber,d.pattern=this.item,d.primeColor=this.primeColor,d.fillColor=this.fillColor,d.cells=this.cells,d.mute=this.mute,this.view.updateConfig()}},{key:"updatePattern",value:function(){this.pattern=l(C[this.levelNumber],this.patternNumber)}},{key:"darkThemeOn",value:function(){"night"===localStorage.getItem("theme")?(localStorage.removeItem("theme"),this.view.primeColor="#000000",this.view.fillColor="#000000",this.updateConfig(),this.view.switchTheme()):(localStorage.setItem("theme","night"),this.view.primeColor="#DCDCDC",this.view.fillColor="#DCDCDC",this.updateConfig(),this.view.switchTheme())}},{key:"createSettings",value:function(){this.view.createSettings(this.levelNumber)}},{key:"showSettings",value:function(){console.log("modal"),this.view.showSettings()}},{key:"hideSettings",value:function(){this.view.hideSettings()}},{key:"drawSolution",value:function(){this.resetGame(),this.view.drawSolution(this.cells)}},{key:"startTimer",value:function(){var e=this;60===this.sec&&(this.minutes++,this.sec=0),this.view.showTimer(this.sec,this.minutes),this.sec++,this.idTimer=setTimeout((function(){e.startTimer()}),1e3)}},{key:"stopTimer",value:function(){clearTimeout(this.idTimer)}},{key:"resetTimer",value:function(){this.minutes=0,this.sec=0,this.view.showTimer(this.sec,this.minutes)}},{key:"saveGame",value:function(){var e={timerState:null,level:null,levelName:C[this.levelNumber],patternNumber:null,paintedCells:null,patternCellsCount:null},t=C[this.levelNumber],i=60*this.minutes+this.sec;e.timerState=i,e.level=t,e.pattern=this.patternNumber,e.paintedCells=this.cells,e.patternCellsCount=this.patternCellsCount,e.patternNumber=this.patternNumber;var n=(0,m.IL)(g,"users/"+d.userId+"/savedGame");(0,m.WO)(n,e),console.log(e)}},{key:"checkSavedGame",value:function(){var e=this,t=(0,m.IL)(g,"users/"+d.userId+"/savedGame");(0,m._M)(t).then((function(t){var i=t.val();console.log(i),e.downloadSavedGame(i)}))}},{key:"downloadSavedGame",value:function(e){if(e){this.patternCellsCount=e.patternCellsCount;var t=e.levelName;this.levelNumber=C.indexOf(t),this.patternNumber=e.patternNumber,this.patterName=k[this.levelNumber][this.patternNumber];var i=e.paintedCells;this.pattern=l(t,this.patternNumber),this.minutes=parseInt(e.timerState/60),this.sec=e.timerState%60,this.view.updateSelectedLevel(t),this.view.updateItemsSelect(k[this.levelNumber]),this.view.updateSelectedItem(this.patterName),this.view.updateCanvasSettings(this.levelNumber),this.updateModel(this.pattern,this.levelNumber);for(var n=0;n<this.pattern.length;n++)for(var s=0;s<this.pattern.length;s++)i[n][s].isPainted?this.cells[n][s].isPainted=!0:i[n][s].isCrossed&&(this.cells[n][s].isCrossed=!0);this.view.drawSavedGame(i)}}},{key:"updateClickCount",value:function(){0===this.clickCount&&(this.startTimer(),this.clickCount=1)}},{key:"updateModel",value:function(e,t,i){this.pattern=e,this.levelNumber=t,this.patterName=i,this.updateConfig(),this.view.updateCanvasSettings(this.levelNumber),this.defineCells(),this.calculateClues(),this.drawField(),this.view.drawLeftClues(this.calculateClues().leftClues,C[this.levelNumber]),this.view.drawTopClues(this.calculateClues().topClues,C[this.levelNumber]),this.calculateWinCondition()}},{key:"fillCell",value:function(e){var t=e.button;this.view.fillCell(e,this.cells);for(var i=0;i<this.cells.length;i++)for(var n=0;n<this.cells[i].length;n++){var s=e.clientX-d.canvas.offsetLeft,o=e.clientY-d.canvas.offsetTop;s>this.cells[i][n].x&&s<this.cells[i][n].x+d.cellWidth&&o>this.cells[i][n].y&&o<this.cells[i][n].y+d.cellHeight&&(this.cells[i][n].isPainted||0!==t?this.cells[i][n].isPainted&&0===t?(this.cells[i][n].isPainted=!1,1===this.cells[i][n].value?this.patternCellsCount--:this.patternCellsCount++):this.cells[i][n].isCrossed||2!==t?this.cells[i][n].isCrossed&&2===t&&(this.cells[i][n].isCrossed=!1):(1===this.cells[i][n].value&&this.cells[i][n].isPainted&&this.patternCellsCount--,this.cells[i][n].isCrossed=!0,this.cells[i][n].isPainted=!1):(this.cells[i][n].isPainted=!0,1===this.cells[i][n].value?this.patternCellsCount++:this.patternCellsCount--))}}},{key:"checkWinCondition",value:function(){if(this.patternCellsCount===this.calculateWinCondition()){this.stopTimer(),this.patternCellsCount=0,this.clickCount=0,this.showResultMessage();var e=C[this.levelNumber],t=60*this.minutes+this.sec;console.log(this.patterName),this.updateScoreTable(t,e,this.patterName)}}},{key:"showResultMessage",value:function(){var e=60*this.minutes+this.sec;this.view.showResultMessage(e-1)}},{key:"hideResultMessage",value:function(){this.view.hideResultMessage()}},{key:"updateItemsSelect",value:function(e){this.levelNumber=e,this.view.updateCanvasSettings(this.levelNumber),this.updateConfig();var t=k[e];this.view.updateItemsSelect(t)}},{key:"getRandomNum",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"randomGame",value:function(){var e=this.getRandomNum(0,2),t=this.getRandomNum(0,4),i=k[t];this.view.showRandomGame(e,t),this.view.updateItemsSelect(k[e]),this.view.updateCanvasSettings(e);var n=l(C[e],t);this.updateModel(n,e,i),this.stopTimer(),this.resetTimer()}},{key:"hideScoreTable",value:function(){this.view.hideScoreTable()}},{key:"showScoreTable",value:function(){this.view.showScoreTable()}},{key:"updateScoreTable",value:function(e,t,i){var n={time:e,level:t,pattern:i},s=(0,m.IL)(g,"users/"+d.userId+"/list/"+"".concat(e));(0,m.WO)(s,n)}},{key:"loadScoreTable",value:function(){var e=this,t=(0,m.IL)(g,"users/"+d.userId+"/list/");(0,m._M)(t).then((function(t){var i=t.val();console.log(i),e.getScoreTable(i)}))}},{key:"getScoreTable",value:function(e){if(e){var t=Object.values(e);t.sort((function(e,t){return e.time-t.time})),this.view.fillScoresList(t)}else alert("Sorry, there are no records about your wins so far. It seems you haven't played yet! Don't miss your chance!!!")}}])&&w(t.prototype,i),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function N(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function E(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:String(t)}var W=[["tree","rhombus","ruLetterD","dinosour","fan"],["snowman","turnip","cat","kettle","plum"],["coffee","elephant","lion","candle","frog"]],I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=null,this.canvas=null,this.ctx=null,this.fieldRowCount=5,this.fieldColumnCount=5,this.cellWidth=45,this.cellHeight=45,this.width=null,this.height=null,this.canvasWrapper=null,this.primeColor="#000000",this.fillColor="#000000",this.settings=null,this.rightAudio=null,this.leftAudio=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.container=e,this.width=this.fieldColumnCount*this.cellWidth,this.height=this.fieldRowCount*this.cellHeight,this.updateConfig(),this.createMenu(),this.rightAudio=new Audio,this.rightAudio.src="./assets/audio/left.mp3",this.leftAudio=new Audio("./assets/audio/left.mp3")}},{key:"updateConfig",value:function(){d.fieldRowCount=this.fieldRowCount,d.fieldColumnCount=this.fieldColumnCount,d.cellWidth=this.cellWidth,d.cellHeight=this.cellHeight,d.width=this.width,d.height=this.height,d.canvas=this.canvas}},{key:"updateCanvasSettings",value:function(e){switch(e){case 0:this.cellWidth=45,this.cellHeight=45,this.fieldRowCount=5,this.fieldColumnCount=5,this.width=this.fieldColumnCount*this.cellWidth,this.height=this.fieldRowCount*this.cellHeight,this.canvas.width=this.width,this.canvas.height=this.height;break;case 1:this.cellWidth=35,this.cellHeight=35,this.fieldRowCount=10,this.fieldColumnCount=10,this.width=this.fieldColumnCount*this.cellWidth,this.height=this.fieldRowCount*this.cellHeight,this.canvas.width=this.width,this.canvas.height=this.height;break;case 2:this.cellWidth=25,this.cellHeight=25,this.fieldRowCount=15,this.fieldColumnCount=15,this.width=this.fieldColumnCount*this.cellWidth,this.height=this.fieldRowCount*this.cellHeight,this.canvas.width=this.width,this.canvas.height=this.height}}},{key:"createMenu",value:function(){console.log("menu");var e=document.createElement("button");e.type="button",e.id="solution",e.className="button solution-btn",e.textContent="Solution";var t=document.createElement("button");t.type="button",t.id="save",t.className="button save-btn",t.textContent="Save";var i=document.createElement("button");i.type="button",i.id="reset",i.className="button reset-btn",i.textContent="Reset";var n=document.createElement("a");n.innerHTML='<span class="material-symbols-outlined " id = "theme-mode">dark_mode</span>',n.id="theme",n.href="";var s=document.createElement("a");s.innerHTML='<span class="material-symbols-outlined game-settings"  id = "settings">settings</span>',s.href="";var o=document.createElement("a");o.className="mute",o.innerHTML='<span class="material-symbols-outlined" id = "mute">no_sound</span>',o.href="";var a=document.createElement("a"),l=document.createElement("span"),r=document.createElement("span");r.className="table-title",l.className="score-ico",a.href="",r.id="table",a.classList.add("table-link"),r.textContent="Scores",a.append(r,l);var c=document.createElement("button");c.className="logout",c.innerHTML='<span class="material-symbols-outlined" id = "logoutBtn">logout</span>';var h=document.createElement("div");h.className="menu";var u=document.createElement("div");u.className="menu-links";var d=document.createElement("div");d.className="game-btns-container",d.append(e,t,i),u.append(s,n,o),h.append(u,a,d,c),this.container.append(h)}},{key:"checkMute",value:function(e){this.container.querySelector(".mute span").textContent=e?"volume_up":"no_sound"}},{key:"switchTheme",value:function(){"night"===localStorage.getItem("theme")?(document.querySelector("html").classList.add("dark"),this.ctx.clearRect(0,0,this.width,this.height),console.log(this.primeColor),this.drawField(),this.container.querySelector("#field").classList.remove("disable-click"),this.container.querySelector("#theme span").textContent="light_mode"):(document.querySelector("html").classList.remove("dark"),this.container.querySelector("#theme span").textContent="dark_mode",this.ctx.clearRect(0,0,this.width,this.height),console.log(this.primeColor),this.drawField())}},{key:"createFieldCanvas",value:function(){this.canvasWrapper=document.createElement("div"),this.canvasWrapper.className="canvas-wrapper",this.canvas=document.createElement("canvas"),this.canvas.className="canvas canvas-field",this.canvas.id="field",this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),this.canvasWrapper.append(this.canvas),this.container.prepend(this.canvasWrapper)}},{key:"drawField",value:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var e=0;e<this.fieldRowCount;e++)for(var t=0;t<this.fieldColumnCount;t++){var i=t*this.cellWidth+.5,n=e*this.cellHeight+.5;this.ctx.beginPath(),this.ctx.rect(i,n,this.cellWidth,this.cellHeight),this.ctx.strokeStyle=this.primeColor,this.ctx.stroke(),this.ctx.closePath()}10===this.fieldRowCount&&(this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/2),this.ctx.lineTo(this.canvas.width,this.canvas.height/2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/2,0),this.ctx.lineTo(this.canvas.width/2,this.canvas.height),this.ctx.stroke(),this.ctx.closePath()),15===this.fieldRowCount&&(this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/3),this.ctx.lineTo(this.canvas.width,this.canvas.height/3),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/3,0),this.ctx.lineTo(this.canvas.width/3,this.canvas.height),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/3*2),this.ctx.lineTo(this.canvas.width,this.canvas.height/3*2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/3*2,0),this.ctx.lineTo(this.canvas.width/3*2,this.canvas.height),this.ctx.stroke(),this.ctx.closePath())}},{key:"drawAbout",value:function(){var e=document.createElement("div"),t=document.createElement("button"),i=document.createElement("h2");i.textContent="About Nonograms",t.id="about-btn",t.className="button",t.textContent="Ok!",e.append(i,t),this.container.append(e)}},{key:"createSettings",value:function(e){console.log(e);var t=document.createElement("div");t.className="settings-modal modal-closed";var i=document.createElement("div");i.className="select-container";var n=document.createElement("h2");n.textContent="Settings";var s=document.createElement("button");s.type="button",s.id="load",s.className="button load-btn",s.textContent="Continue saved game";var o=document.createElement("button");o.type="button",o.id="random",o.className="button random-btn",o.textContent="Random game";var a=document.createElement("button");a.id="ok-btn",a.textContent="Ok!",a.className="button";var l=function(){console.log(e);var t=["light","middle","hard"],i=document.createElement("select");i.className="select",i.name="levels",i.id="levels";var n=document.createElement("label");n.textContent="Choose a Level: ",n.for="levels";for(var s=0;s<t.length;s++){var o=document.createElement("option");o.value=t[s],o.text=t[s],s===e&&(o.selected=!0),i.append(o)}return n.append(i),n}(),r=function(){var t=document.createElement("select");t.className="select",t.name="items",t.id="items";var i=document.createElement("label");i.textContent="Choose a picture: ",i.for="items",console.log(e),console.log(W[e]);for(var n=0;n<W[e].length;n++){var s=document.createElement("option");s.value=W[e][n],s.text=W[e][n],t.append(s),s===W[e][n]&&(s.selected=!0)}return i.append(t),i}();i.append(l,r),t.append(n,s,o,i,a),this.settings=t,this.container.append(t)}},{key:"showSettings",value:function(){this.settings.classList.remove("modal-closed")}},{key:"hideSettings",value:function(){this.settings.classList.add("modal-closed")}},{key:"drawLeftClues",value:function(e,t){this.container.querySelector("#left")&&this.container.querySelector("#left").remove();for(var i=0,n=0;n<e.length;n++)i<e[n].length&&(i=e[n].length);for(var s=0;s<e.length;s++)for(;e[s].length!==i;)e[s].unshift(0);var o=document.createElement("table");o.className="".concat(t,"-left-table table"),o.id="left",this.canvasWrapper.append(o);var a=document.createElement("tbody");o.append(a);for(var l=0;l<e.length;l++)for(var r=a.insertRow(),c=0;c<e[l].length;c++){var h=r.insertCell();h.className="".concat(t,"-cell cell"),0!=e[l][c]&&(h.textContent=e[l][c],h.classList.add("clue"))}if(10===e.length&&(N(o.rows)[4].className="thick-bottom line"),15===e.length){var u=N(o.rows);u[4].className="".concat(t,"-cell cell thick-bottom line"),u[9].className="".concat(t,"-cell cell thick-bottom line")}}},{key:"drawTopClues",value:function(e,t){this.container.querySelector("#top")&&this.container.querySelector("#top").remove();for(var i=0,n=0;n<e.length;n++)i<e[n].length&&(i=e[n].length);for(var s=0;s<e.length;s++)for(;e[s].length!==i;)e[s].unshift(0);var o=document.createElement("table");o.className="".concat(t,"-top-table table"),o.id="top",this.canvasWrapper.append(o);var a=document.createElement("tbody");o.append(a);for(var l=0;l<i;l++)for(var r=a.insertRow(),c=0;c<e.length;c++){var h=r.insertCell();h.className="".concat(t,"-cell cell"),0!=e[c][l]&&(h.textContent=e[c][l],h.classList.add("clue"))}if(10===e.length)for(var u=N(o.rows),d=0;d<u.length;d++){var m=u[d].cells;m[4].className="".concat(t,"-cell cell thick-right line"),m[4].textContent&&m[4].classList.add("clue")}if(15===e.length)for(var v=N(o.rows),p=0;p<v.length;p++){var f=v[p].cells;f[4].className="".concat(t,"-cell cell thick-right line"),f[9].className="".concat(t,"-cell cell thick-right line"),f[4].textContent&&f[4].classList.add("clue"),f[9].textContent&&f[9].classList.add("clue")}}},{key:"drawSolution",value:function(e){for(var t=0;t<this.fieldRowCount;t++)for(var i=0;i<this.fieldColumnCount;i++)this.ctx.beginPath(),this.ctx.rect(e[t][i].x-.5,e[t][i].y-.5,this.cellWidth-.5,this.cellHeight-.5),1===e[t][i].value&&(e[t][i].isPainted=!0,this.ctx.fillStyle=this.primeColor,this.ctx.fill(),this.ctx.closePath());return e}},{key:"refreshLines",value:function(){10===this.fieldRowCount&&(this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/2),this.ctx.lineTo(this.canvas.width,this.canvas.height/2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/2,0),this.ctx.lineTo(this.canvas.width/2,this.canvas.height),this.ctx.stroke(),this.ctx.closePath()),15===this.fieldRowCount&&(this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/3),this.ctx.lineTo(this.canvas.width,this.canvas.height/3),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/3,0),this.ctx.lineTo(this.canvas.width/3,this.canvas.height),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(0,this.canvas.height/3*2),this.ctx.lineTo(this.canvas.width,this.canvas.height/3*2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1.5,this.ctx.strokeStyle=this.primeColor,this.ctx.moveTo(this.canvas.width/3*2,0),this.ctx.lineTo(this.canvas.width/3*2,this.canvas.height),this.ctx.stroke(),this.ctx.closePath())}},{key:"resetGame",value:function(e){for(var t=0;t<this.fieldRowCount;t++)for(var i=0;i<this.fieldColumnCount;i++)e[t][i].isPainted&&this.ctx.clearRect(e[t][i].x,e[t][i].y,this.cellWidth-.85,this.cellHeight-.85),e[t][i].isCrossed&&this.ctx.clearRect(e[t][i].x+.5,e[t][i].y+.5,this.cellWidth-.5,this.cellHeight-.5);for(var n=0;n<e.length;n++)for(var s=0;s<e[n].length;s++)4!==n&&5!==n&&4!==s&&5!==s||this.refreshLines(),e[n][s].isPainted?e[n][s].isPainted=!1:e[n][s].isCrossed&&(e[n][s].isCrossed=!1)}},{key:"createTimer",value:function(e,t){var i=document.createElement("span");i.id="timer",i.classList.add("timer"),i.textContent="".concat(e.toString().padStart(2,"0")," : ").concat(t.toString().padStart(2,"0")),this.canvasWrapper.prepend(i)}},{key:"showTimer",value:function(e,t){this.container.querySelector("#timer").textContent="".concat(t.toString().padStart(2,"0")," : ").concat(e.toString().padStart(2,"0"))}},{key:"updateItemsSelect",value:function(e){for(var t=this.container.querySelector("#items"),i=0;i<e.length;i++)t.options[i].text=e[i],t.options[i].value=e[i]}},{key:"updateSelectedLevel",value:function(e){for(var t=this.container.querySelector("#levels").getElementsByTagName("option"),i=0;i<t.length;i++)t[i].value===e&&(t[i].selected=!0)}},{key:"updateSelectedItem",value:function(e){for(var t=this.container.querySelector("#items").getElementsByTagName("option"),i=0;i<t.length;i++)t[i].value===e&&(t[i].selected=!0)}},{key:"drawSavedGame",value:function(e){for(var t=0;t<this.fieldRowCount;t++)for(var i=0;i<this.fieldColumnCount;i++)this.ctx.beginPath(),this.ctx.rect(e[t][i].x-.5,e[t][i].y-.5,this.cellWidth-.5,this.cellHeight-.5),e[t][i].isPainted?(this.ctx.fillStyle=this.primeColor,this.ctx.fill(),this.ctx.closePath()):e[t][i].isCrossed&&(this.ctx.beginPath(),this.ctx.rect(e[t][i].x,e[t][i].y,this.cellWidth,this.cellHeight),this.ctx.strokeStyle=this.primeColor,this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.moveTo(e[t][i].x+5.2,e[t][i].y+5.2),this.ctx.lineTo(e[t][i].x+this.cellWidth-5.2,e[t][i].y+this.cellHeight-5.2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e[t][i].x+5.2,e[t][i].y+this.cellHeight-5.2),this.ctx.lineTo(e[t][i].x+this.cellWidth-5.2,e[t][i].y+5.2),this.ctx.stroke())}},{key:"fillCell",value:function(e,t){var i=e,n=e.button;console.log(t);for(var s=0;s<t.length;s++)for(var o=0;o<t[s].length;o++){var a=i.clientX-this.canvas.offsetLeft,l=i.clientY-this.canvas.offsetTop;4!==s&&5!==s&&4!==o&&5!==o||this.refreshLines(),a>t[s][o].x&&a<t[s][o].x+this.cellWidth&&l>t[s][o].y&&l<t[s][o].y+this.cellHeight&&(t[s][o].isPainted||0!==n?t[s][o].isPainted&&0===n?this.ctx.clearRect(t[s][o].x,t[s][o].y,this.cellWidth-.5,this.cellHeight-.5):t[s][o].isCrossed||2!==n?t[s][o].isCrossed&&2===n&&(this.ctx.clearRect(t[s][o].x+5.2,t[s][o].y+5.2,this.cellWidth-5.2,this.cellHeight-5.2),this.ctx.beginPath(),this.ctx.moveTo(t[s][o].x,t[s][o].y+this.cellHeight),this.ctx.lineTo(t[s][o].x+this.cellWidth,t[s][o].y+this.cellHeight),this.ctx.lineTo(t[s][o].x+this.cellWidth,t[s][o].y),this.ctx.stroke()):(this.ctx.clearRect(t[s][o].x+.5,t[s][o].y+.5,this.cellWidth-.5,this.cellHeight-.5),this.rightAudio.play(),this.ctx.beginPath(),this.ctx.moveTo(t[s][o].x+8.2,t[s][o].y+8.2),this.ctx.lineTo(t[s][o].x+this.cellWidth-8.2,t[s][o].y+this.cellHeight-8.2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t[s][o].x+8.2,t[s][o].y+this.cellHeight-8.2),this.ctx.lineTo(t[s][o].x+this.cellWidth-8.2,t[s][o].y+8.2),this.ctx.stroke()):(this.ctx.clearRect(t[s][o].x,t[s][o].y,this.cellWidth-.5,this.cellHeight-.5),this.ctx.beginPath(),this.ctx.rect(t[s][o].x-.5,t[s][o].y-.5,this.cellWidth-.5,this.cellHeight-.5),this.ctx.fillStyle=this.fillColor,this.ctx.fill(),this.ctx.closePath()))}}},{key:"createResultMessage",value:function(){var e=document.createElement("div"),t=document.createElement("button"),i=document.createElement("button"),n=document.createElement("p");n.id="message",n.textContent="",i.id="result-btn",i.textContent="Ok!",i.className="button",e.className="modal-overlay modal-closed",t.className="result-modal modal-closed",t.append(n,i),this.container.append(e,t)}},{key:"showResultMessage",value:function(e){document.getElementById("message").textContent="Great! You have solved the nonogram in ".concat(e," seconds!"),document.querySelector(".modal-overlay").classList.remove("modal-closed"),document.querySelector(".result-modal ").classList.remove("modal-closed")}},{key:"hideResultMessage",value:function(){document.querySelector(".modal-overlay").classList.add("modal-closed"),document.querySelector(".result-modal").classList.add("modal-closed")}},{key:"showRandomGame",value:function(e,t){var i=this.container.querySelector("#levels").getElementsByTagName("option");i[e].selected=!0,i[e].text;var n=this.container.querySelector("#items").getElementsByTagName("option");n[t].selected=!0,n[t].text}},{key:"createScoreTable",value:function(){var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("button"),n=document.createElement("h2");n.textContent="GOOD JOB!";var s=document.createElement("table");s.id="scores";var o=document.createElement("thead"),a=document.createElement("tr"),l=document.createElement("th");l.textContent="Pattern";var r=document.createElement("th");r.textContent="Level";var c=document.createElement("th");c.textContent="Time",a.append(l,r,c),o.append(a);var h=document.createElement("tbody");h.id="scores-table",s.append(o,h),i.id="table-btn",i.className="button",i.textContent="Ok!",e.className="modal-overlay modal-closed",t.className="table-modal modal-closed",t.append(n,s,i),this.container.append(e,t)}},{key:"showScoreTable",value:function(){document.querySelector(".modal-overlay").classList.remove("modal-closed"),document.querySelector(".table-modal ").classList.remove("modal-closed")}},{key:"hideScoreTable",value:function(){document.querySelector(".modal-overlay").classList.add("modal-closed"),document.querySelector(".table-modal").classList.add("modal-closed")}},{key:"fillScoresList",value:function(e){var t=0;console.log(this.container.querySelector("tbody")),this.container.querySelector("#scores-table").remove();var i=document.createElement("tbody");i.id="scores-table";for(var n=0;n<e.length;n++){t++;var s=document.createElement("tr"),o=document.createElement("td"),a=document.createElement("td"),l=document.createElement("td"),r=e[n].level,c=e[n].pattern,h=e[n].time,u=parseInt(h/60),d=h%60;o.textContent="".concat(t,". ").concat(c),a.textContent="".concat(r),l.textContent="".concat(u,"min : ").concat(d,"sec"),s.append(o,a,l),i.append(s)}this.container.querySelector("#scores").append(i)}}])&&E(t.prototype,i),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const R=function(){var e,t,i,n=document.getElementById("content");(e=new S,t=new I,i=new u,{init:function(n){t.init(n),e.init(t),i.init(n,e)}}).init(n)};var M={"/":R,"/about":function(){return'<div>\n  <h2>Nonograms</h2>\n  <p>\n  In <strong>1987</strong> , Non Ishida, a Japanese graphics editor, won a competition in Tokyo by designing grid pictures using skyscraper lights which are turned on or off. At the same time and with no connection, a professional Japanese puzzler named Tetsuya Nishio invents the same puzzles. From this, the concept of Paint by numbers and picture-forming logic puzzles was born.\n  </p>\n  <p><strong>In 1988</strong>, Non Ishida published three picture grid puzzles in Japan under the name of "Window Art Puzzles".<br>\n  <strong>In 1990</strong>, James Dalgety in the UK invented the name Nonograms after Non Ishida, and The Sunday Telegraph started publishing them on a weekly basis.<br>\n  <strong>In 1993</strong>, First book of Nonograms was published by Non Ishida in Japan. The Sunday Telegraph published a dedicated puzzle book titled the "Book of Nonograms". Nonograms are also published in Sweden, United States, South Africa and other countries.\n  </p>\n  <p><strong>In 1998</strong>, The Sunday Telegraph ran a competition to choose a new name for their puzzles. Griddlers was the winning name that readers chose. Pic-a-Pix puzzles in Germany with PM Magazin, a wholly owned subsidiary of Gruner + Jahr, the publishers of the famous Stern magazine.<br>\n  <strong>In 1999</strong>, Paint by numbers were published by Sanoma Uitgevers in Holland, Puzzler Media (formerly British European Associated Publishers) in the UK and Nikui Rosh Puzzles.\n  2006.01.01 - GameLO.net Website Premiere.\n  </p>'},"/how":function(){return'<div style="display: flex; flex-direction: column; justify-content: start;"">\n  <h2>Rules</h2>\n  <p><Game rules:<br> Nonograms is a puzzle game to reveal a hidden picture by looking at the number clues.The clues are given at the top and left side of the grid. Each number in these clue defines a block of black cell. A number indicates an unbroken line of black cells, and they are in the same order as the lines. These puzzles are often black and white—describing a binary image—but they can also be colored.\n  </p>\n  <a style="margin: 20px;"href="https://nonograms-katana.fandom.com/wiki/Tips_for_solving" target= "a_blank">How to solve? Watch the video!</a>\n  </div>\n'}};const q=function(e){var t=window.location.pathname;console.log(t);var i=M[t]||R;setTimeout((function(){"/"===t?(document.getElementById(e).innerHTML="",i()):document.getElementById(e).innerHTML=i()}),300),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";document.querySelectorAll(".menu__link").forEach((function(t){t.classList.toggle("active",e===t.href)}))}(t)};const H=function(e){var t="content";e.insertAdjacentHTML("beforeend","\n  ".concat('<header class="header">\n  <div class="wrapper">\n    <a href="" target="_blank" >\n      <span class="logo"></span>\n    </a>\n    <nav class="nav">\n      <ul class="nav-list">\n        <li class="nav_item">\n          <a href="/" class="nav_link menu__link" id = "game">\n          Game\n          </a>\n        </li>\n        <li class="nav_item">\n          <a href="/about" class="nav_link menu__link" id = "about">\n          About\n          </a>\n        </li>\n        <li class="nav_item">\n          <a href="/how" class="nav_link menu__link" id = "rules">Rules</a>\n        </li>\n      </ul>\n    </nav>\n    <div class="popup" id = \'popup\'></div>\n    <div class="header_burger" >\n    <svg id = \'burger\' width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="43" height="43" rx="21.5" stroke="#665F55"/><path d="M14 18H30" stroke="#403F3D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 26H30" stroke="#403F3D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>\n  </div>\n  <div class="close_nav" >\n  <svg id = \'close\' width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">\n     <rect x="0.5" y="0.5" width="43" height="43" rx="21.5" stroke="#665F55"/>\n     <path d="M16.3438 16.3431L27.6575 27.6568" stroke="#403F3D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n     <path d="M16.3438 27.6568L27.6575 16.3431" stroke="#403F3D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n     </svg>\n  </div>\n  </div>\n</header>',"\n  <section id=").concat(t,' class="content">\n  </section>\n  ').concat('<footer class="footer">\n  <div class="footer-wrapper">\n  <p>&copy; 2024 </p>\n  <p><a class="footer-link github" href="https://github.com/voronovanasta" target="_blank">github</a></p>\n  </div>\n</footer>',"\n")),q(t),window.addEventListener("popstate",(function(){return q(t)})),e.addEventListener("click",(function(e){var i=e.target;i.matches(".menu__link")&&(e.preventDefault(),history.pushState({},"",i.href),q(t))}))};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function j(e,t,i){return t&&G(e.prototype,t),i&&G(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:String(t)}document.addEventListener("DOMContentLoaded",(function(){var e,t,i,s=document.getElementById("root");(e=function(){function e(){O(this,e),this.container=null,this.root=null}return j(e,[{key:"init",value:function(e){this.container=e,this.showRegisterForm()}},{key:"showRegisterForm",value:function(){this.container.innerHTML=n.register}},{key:"showLoginForm",value:function(){console.log("here"),console.log(this.container),console.log(n.login),this.container.innerHTML=n.login}},{key:"showGame",value:function(){this.container.innerHTML="",H(this.container)}},{key:"hideGame",value:function(){this.showLoginForm()}}]),e}(),t=function(){function e(){O(this,e),this.view=null}return j(e,[{key:"init",value:function(e){this.view=e,this.userData=JSON.parse(sessionStorage.getItem("my_firebase_user")),this.userData&&this.view.showGame()}},{key:"login",value:function(e,t){var i=this;e&&t&&(0,p.kJ)(y,e,t).then((function(e){var t=e.user.uid;d.userId=t,sessionStorage.setItem("my_firebase_user",JSON.stringify(t)),i.view.showGame()}))}},{key:"register",value:function(e,t){var i=this;e&&t&&(0,p.UH)(y,e,t).then((function(e){e.user?i.view.showLoginForm():(i.view.hideGame(),sessionStorage.removeItem("my_firebase_user"))})).catch((function(e){console.log("Error: "+e.message)}))}},{key:"logout",value:function(){var e=this;y.signOut().then((function(){e.view.hideGame(),sessionStorage.removeItem("my_firebase_user"),d.useId=null}))}}]),e}(),i=function(){function e(){O(this,e),this.model=null,this.container=null}return j(e,[{key:"init",value:function(e,t){this.model=t,this.container=e,this.addEventListeners()}},{key:"addEventListeners",value:function(){var e=this;document.addEventListener("click",(function(t){t.target&&"regBtn"===t.target.id&&(t.preventDefault(),t.stopPropagation(),e.model.register(e.container.querySelector("#regMail").value,e.container.querySelector("#regPassword").value)),t.target&&"loginBtn"===t.target.id&&(t.preventDefault(),t.stopPropagation(),e.model.login(e.container.querySelector("#logMail").value,e.container.querySelector("#logPassword").value)),"logoutBtn"===t.target.id&&(console.log("logout"),e.model.logout())}))}}]),e}(),{init:function(n){var s=new e,o=new t,a=new i;s.init(n),o.init(s),a.init(n,o)}}).init(s)}))}},i={};function n(e){var s=i[e];if(void 0!==s)return s.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,i,s,o)=>{if(!i){var a=1/0;for(h=0;h<e.length;h++){for(var[i,s,o]=e[h],l=!0,r=0;r<i.length;r++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](i[r])))?i.splice(r--,1):(l=!1,o<a&&(a=o));if(l){e.splice(h--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[i,s,o]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={590:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var s,o,[a,l,r]=i,c=0;if(a.some((t=>0!==e[t]))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(r)var h=r(n)}for(t&&t(i);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(h)},i=self.webpackChunkwebpack_boilerplate_vanillajs=self.webpackChunkwebpack_boilerplate_vanillajs||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s=n.O(void 0,[636],(()=>n(856)));s=n.O(s)})();
//# sourceMappingURL=main.5c8ac86b736a00033052.js.map